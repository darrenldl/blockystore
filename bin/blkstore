#!/usr/bin/env python3
import argparse
import shutil

blkar_name="blkar"

def check_for_blkar_installation():
    if shutil.which(blkar_name) == None:
        print(blkar_name + " not detected, please make sure you have installed blkar correctly")
        exit(1)

def main():
    check_for_blkar_installation()
    parser = argparse.ArgumentParser()
    subparsers = parser.add_subparsers(help="subcommand help")

    parser_serve = subparsers.add_parser("serve", help="Launch in server mode")
    parser_serve.add_argument("--port", required=True, help="Localhost port to listen on")
    parser_serve.add_argument("dir", help="Directory for file storage")

    parser_upload = subparsers.add_parser("upload", help="Upload file to server")
    parser_upload.add_argument("--addr", required=True, help="Address to connect to")
    parser_upload.add_argument("--port", required=True, help="Port to connect to")

    parser_download = subparsers.add_parser("download", help="Download file from server")
    parser_download.add_argument("--addr", required=True, help="Address to connect to")
    parser_download.add_argument("--port", required=True, help="Port to connect to")

    parser.parse_args()

if __name__ == "__main__":
    main()
